<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>minecraft伺服器 - 下載地圖</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';"/>
    <link href="./css/bootstrap-v5.min.css" rel="stylesheet">
    <script src="./css/bootstrap.bundle.min.js"></script>
    <link href="./css/public.css" rel="stylesheet">
    <style>
        table {
            margin-bottom: 0 !important;
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <script id="template1" type="x-tmpl-mustache">

        <div class="container" style="height:200px;padding-left:0 !important;padding-right:0 !important;">
           <img class="card-img" style="width:100%;" src="{{item.logo}}" alt="{{item.motd}}">
          <h5 class="card-title" style="color:white;">{{item.motd}}</h5>
          <p class="card-text" style="color:white;">版本: {{item.version}}</p>
        </div>

        <table class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col" style="text-align:center;">選擇</th>
              <th scope="col">地圖目錄</th>
              <th scope="col">執行目錄</th>
              <th scope="col" style="text-align:right;">
                  <button type="button" class="btn btn-sm btn-warning" onclick="btn_create_map_folder();">新增地圖目錄</button>
                  <button type="button" class="btn btn-sm btn-dark col-3" onclick="btn_close();">關閉</button>
              </th>
            </tr>
          </thead>
          <tbody>
          {{#worldFolders}}
            <tr>
              <th scope="row" style="text-align:center;">
                  <input type="radio" class="btn btn-lg" id="{{folder}}" name="level_name" value="{{folder}}" onclick="btn_select_map_folder('{{folder}}',{{_id}})" {{#selected}}checked{{/selected}}>
              </th>
              <td>
                 <label for="{{folder}}">{{folder}}</label>
              </td>
              <td colspan="2">
                 {{#removeable}}
                    <button type="button" class="btn btn-sm btn-danger col-3" id="btn_remove_map_folder_{{_id}}" onclick="btn_remove_map_folder('{{folder}}')">刪除</button>
                 {{/removeable}}
                 {{#clearable}}
                    <button type="button" class="btn btn-sm btn-warning col-3" onclick="btn_clear_map_folder('{{folder}}')">清空</button>
                 {{/clearable}}
                 <button type="button" class="btn btn-sm btn-primary col-3" onclick="btn_open_map_folder('{{folder}}');">開啟</button>
                 <button type="button" class="btn btn-sm btn-primary col-3" onclick="btn_open_map_folder('{{folder}}');">安裝</button>
              </td>
            </tr>
          {{/worldFolders}}
          </tbody>
        </table>
    </script>
    <div class="row" id="container1" style="margin-bottom: 0;">
        <!-- template1 Render HTML Here -->
    </div>
</div>

</body>
</html>

<script>
    let consoleTitle = '[/form_settinng_server_map.html]';
    const path = require('path');
    const {remote, ipcRenderer} = require('electron');
    const {app, dialog} = remote;
    const Mustache = require('mustache');  //樣版引擎 https://github.com/janl/mustache.js

    //PS: 攔截錯誤送給 main process
    window.onerror = function (error, url, line) {
        ipcRenderer.send('errorInWindow', error, url, line);
    };




    //....................................................................................
    /**
     * 接收主進程(index.js)的訊息
     */

    //載入伺服器資料到表單 - ok
    //call: app/index.js => ipcMain.on('openwin_form_server')
    ipcRenderer.on('load', async (event, param1) => {

        //console.log(consoleTitle, '[ipcRenderer][load2] param1:', param1);
        //await load_server(param1.server_id);

    });

    //....................................................................................
    /**
     * 關閉視窗 - ok
     */
    let btn_close = () => {

        ipcRenderer.send('ipcMain_RenderList', {s: 'btn_close', data: {}});   //PS: 傳遞給 [主進程]

        remote.getCurrentWindow().close();  //關閉自己

    }
    //....................................................................................
</script>
